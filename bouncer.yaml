# Bouncer Configuration
# Quality control at the door

# Directory to watch
watch_dir: .

# Debounce delay in seconds (wait for file changes to settle)
debounce_delay: 2

# Patterns to ignore
ignore_patterns:
  - .git
  - node_modules
  - __pycache__
  - "*.pyc"
  - venv
  - .env
  - .bouncer

# Bouncer Configuration
bouncers:
  # Code Quality Bouncer
  code_quality:
    enabled: true
    file_types:
      - .py
      - .js
      - .ts
      - .jsx
      - .tsx
    auto_fix: true
    checks:
      - syntax
      - linting
      - formatting
  
  # Security Bouncer
  security:
    enabled: true
    file_types:
      - .py
      - .js
      - .ts
      - .java
      - .go
      - .rb
    auto_fix: false  # Never auto-fix security issues
    severity_threshold: medium
  
  # Documentation Bouncer
  documentation:
    enabled: true
    file_types:
      - .md
      - .rst
      - .txt
    auto_fix: true
    checks:
      - links
      - spelling
      - formatting
  
  # Data Validation Bouncer
  data_validation:
    enabled: true
    file_types:
      - .json
      - .yaml
      - .yml
      - .csv
    auto_fix: true
    checks:
      - schema
      - formatting
  
  # Performance Bouncer
  performance:
    enabled: true
    file_types:
      - .py
      - .js
      - .ts
      - .png
      - .jpg
      - .jpeg
    auto_fix: true
    max_file_size: 1000000  # 1MB
    max_image_size: 500000  # 500KB
  
  # Accessibility Bouncer
  accessibility:
    enabled: true
    file_types:
      - .html
      - .jsx
      - .tsx
      - .vue
    auto_fix: true
    wcag_level: AA  # A, AA, or AAA
  
  # License & Legal Bouncer
  license:
    enabled: true
    file_types:
      - .py
      - .js
      - .ts
      - .java
      - .go
    auto_fix: true
    project_license: MIT
    require_headers: true
  
  # Infrastructure Bouncer
  infrastructure:
    enabled: true
    file_types:
      - Dockerfile
      - .yaml
      - .yml
      - .tf
      - .json
    auto_fix: false
    checks:
      - dockerfile
      - k8s
      - terraform
  
  # API Contract Bouncer
  api_contract:
    enabled: true
    file_types:
      - .yaml
      - .yml
      - .json
      - .graphql
    auto_fix: true
    api_type: openapi  # openapi, graphql, grpc
    allow_breaking_changes: false
  
  # Dependency Bouncer
  dependency:
    enabled: true
    file_types:
      - package.json
      - requirements.txt
      - Pipfile
      - go.mod
      - Cargo.toml
    auto_fix: false  # Never auto-update dependencies
    severity_threshold: medium
    check_updates: true
  
  # Obsidian Bouncer
  obsidian:
    enabled: true
    file_types:
      - .md
    auto_fix: true
    
    # Frontmatter settings
    required_fields:
      - tags
      - created
    
    # Tag settings
    tag_format: kebab-case  # kebab-case, camelCase, snake_case
    max_tags: 10
    
    # Link settings
    check_broken_links: true
    suggest_connections: true
    min_connections: 1  # Warn about isolated notes
    
    # Content settings
    min_note_length: 50  # characters
    require_headings: true
    
    # Vault structure
    attachment_folder: attachments
    template_folder: templates
    daily_notes_folder: daily

# Notification Configuration
notifications:
  # Slack notifications
  slack:
    enabled: false
    webhook_url: ${SLACK_WEBHOOK_URL}
    channel: "#bouncer"
    min_severity: warning  # info, warning, denied, error
  
  # Discord notifications
  discord:
    enabled: false
    webhook_url: ${DISCORD_WEBHOOK_URL}
    username: "Bouncer Bot"
    min_severity: warning
  
  # Email notifications (SMTP)
  email:
    enabled: false
    smtp_host: ${SMTP_HOST}
    smtp_port: 587
    smtp_user: ${SMTP_USER}
    smtp_password: ${SMTP_PASSWORD}
    from_email: "bouncer@your-domain.com"
    to_emails:
      - "team@your-domain.com"
    use_tls: true
    min_severity: error
  
  # Microsoft Teams notifications
  teams:
    enabled: false
    webhook_url: ${TEAMS_WEBHOOK_URL}
    min_severity: warning
  
  # Generic webhook (for custom integrations)
  webhook:
    enabled: false
    webhook_url: ${GENERIC_WEBHOOK_URL}
    method: POST  # POST or PUT
    headers:
      Authorization: "Bearer ${WEBHOOK_SECRET}"
    min_severity: info
  
  # File logging (JSON)
  file_log:
    enabled: true
    log_dir: .bouncer/logs
    rotation: daily  # daily, weekly, monthly, none
